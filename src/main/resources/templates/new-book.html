<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%);
            min-height: 100vh;
            color: #333;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo h1 {
            font-size: 2rem;
            font-weight: 700;
            color: #333;
        }

        .logo span {
            font-size: 2rem;
        }

        .header-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .back-btn {
            background: white;
            color: #3a7bd5;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            border: 2px solid #3a7bd5;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .back-btn:hover {
            background: linear-gradient(135deg, #00d2ff, #3a7bd5);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 210, 255, 0.4);
            border-color: transparent;
        }

        .logout-btn {
            background: linear-gradient(135deg, #00d2ff, #3a7bd5);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 210, 255, 0.3);
        }

        .logout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 210, 255, 0.4);
        }

        .main-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 3rem 2rem;
            flex: 1;
            width: 100%;
        }

        .page-title {
            text-align: center;
            margin-bottom: 3rem;
            color: white;
        }

        .page-title h2 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .page-title p {
            font-size: 1.3rem;
            opacity: 0.9;
        }

        .content-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        .content-card button[type="submit"] {
            width: 100%;
            padding: 1.2rem;
            background: linear-gradient(135deg, #00d2ff, #3a7bd5);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 210, 255, 0.3);
            margin-top: 1rem;
        }

        .content-card button[type="submit"]:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 210, 255, 0.4);
            background: linear-gradient(135deg, #3a7bd5, #00d2ff);
        }

        .form-group {
            margin-bottom: 2rem;
            position: relative;
        }

        label {
            display: block;
            margin-bottom: 0.8rem;
            font-weight: 600;
            color: #333;
            font-size: 1.1rem;
        }

        .required::after {
            content: " *";
            color: #dc3545;
        }

        input {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.8);
        }

        input:focus {
            outline: none;
            border-color: #3a7bd5;
            box-shadow: 0 0 0 3px rgba(58, 123, 213, 0.1);
            background: white;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π */
        .success-message {
            background: linear-gradient(135deg, #38ef7d, #11998e);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            text-align: center;
            display: none;
        }

        .error-message-global {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            text-align: center;
            display: none;
        }

        .field-error {
            color: #dc3545;
            font-size: 0.9rem;
            margin-top: 0.3rem;
            display: none;
        }

        .error-input {
            border-color: #dc3545 !important;
            background-color: #fff5f5 !important;
        }

        .help-text {
            font-size: 0.85rem;
            color: #666;
            margin-top: 0.3rem;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .header-content {
                padding: 0 1rem;
                flex-direction: column;
                gap: 1rem;
            }

            .header-actions {
                width: 100%;
                justify-content: center;
            }

            .page-title h2 {
                font-size: 2rem;
            }

            .page-title p {
                font-size: 1.1rem;
            }

            .content-card {
                padding: 2rem;
            }
        }
    </style>
</head>
<body>
<div class="header">
    <div class="header-content">
        <div class="logo">
            <h1><span>üìö</span> –ë–∏–±–ª–∏–æ—Ç–µ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</h1>
        </div>
        <div class="header-actions">
            <a href="/" class="back-btn">‚Üê –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</a>
            <form action="/logout" method="post">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <button type="submit" class="logout-btn">üö™ –í—ã–π—Ç–∏</button>
            </form>
        </div>
    </div>
</div>

<div class="main-content">
    <div class="page-title">
        <h2>‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É</h2>
        <p>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–Ω–∏–≥–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥</p>
    </div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
    <div id="successMessage" class="success-message" th:if="${param.success}">
        ‚úÖ –ö–Ω–∏–≥–∞ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –∫–∞—Ç–∞–ª–æ–≥!
    </div>

    <div id="errorMessage" class="error-message-global" th:if="${error}">
        <span th:text="${error}"></span>
    </div>

    <div class="content-card">
        <form id="addBookForm" action="/books" method="post">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

            <!-- –ù–∞–∑–≤–∞–Ω–∏–µ -->
            <div class="form-group">
                <label for="title" class="required">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏:</label>
                <input type="text" id="title" name="title"
                       placeholder="–í–æ–π–Ω–∞ –∏ –º–∏—Ä"
                       th:value="${book != null ? book.title : ''}"
                       required
                       minlength="2"
                       maxlength="200">
                <div class="field-error" id="titleError">–ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 2 –¥–æ 200 —Å–∏–º–≤–æ–ª–æ–≤</div>
            </div>

            <!-- –ê–≤—Ç–æ—Ä -->
            <div class="form-group">
                <label for="author" class="required">–ê–≤—Ç–æ—Ä:</label>
                <input type="text" id="author" name="author"
                       placeholder="–õ–µ–≤ –¢–æ–ª—Å—Ç–æ–π"
                       th:value="${book != null ? book.author : ''}"
                       required
                       minlength="2"
                       maxlength="100">
                <div class="field-error" id="authorError">–ò–º—è –∞–≤—Ç–æ—Ä–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 2 –¥–æ 100 —Å–∏–º–≤–æ–ª–æ–≤</div>
            </div>

            <!-- ISBN (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ) -->
            <div class="form-group">
                <label for="isbn">ISBN:</label>
                <input type="text" id="isbn" name="isbn"
                       placeholder="978-5-699-12014-7 –∏–ª–∏ 1974279820"
                       th:value="${book != null ? book.isbn : ''}"
                       maxlength="20">
                <div class="help-text">–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ. –§–æ—Ä–º–∞—Ç: 978-5-699-12014-7 –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ 1974279820</div>
                <div class="field-error" id="isbnError">–ú–∞–∫—Å–∏–º—É–º 20 —Å–∏–º–≤–æ–ª–æ–≤ (—Ü–∏—Ñ—Ä—ã –∏ –¥–µ—Ñ–∏—Å—ã)</div>
            </div>

            <!-- –ì–æ–¥ –∏–∑–¥–∞–Ω–∏—è -->
            <div class="form-group">
                <label for="publicationYear" class="required">–ì–æ–¥ –∏–∑–¥–∞–Ω–∏—è:</label>
                <input type="number" id="publicationYear" name="publicationYear"
                       placeholder="1869"
                       th:value="${book != null ? book.publicationYear : ''}"
                       required
                       min="1000"
                       max="2030">
                <div class="field-error" id="yearError">–ì–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 1000 –¥–æ 2030</div>
            </div>

            <!-- –ñ–∞–Ω—Ä -->
            <div class="form-group">
                <label for="genre">–ñ–∞–Ω—Ä:</label>
                <input type="text" id="genre" name="genre"
                       placeholder="–†–æ–º–∞–Ω"
                       th:value="${book != null ? book.genre : ''}"
                       maxlength="50">
                <div class="field-error" id="genreError">–ú–∞–∫—Å–∏–º—É–º 50 —Å–∏–º–≤–æ–ª–æ–≤</div>
            </div>

            <!-- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ -->
            <div class="form-group">
                <label for="totalCount" class="required">–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
                <input type="number" id="totalCount" name="totalCount"
                       placeholder="5"
                       th:value="${book != null ? book.totalCount : 1}"
                       required
                       min="1"
                       max="1000"
                       value="1">
                <div class="field-error" id="totalCountError">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 1 –¥–æ 1000</div>
            </div>

            <!-- –î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –≤—ã–¥–∞—á–∏ -->
            <div class="form-group">
                <label for="availableCount" class="required">–î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –≤—ã–¥–∞—á–∏:</label>
                <input type="number" id="availableCount" name="availableCount"
                       placeholder="3"
                       th:value="${book != null ? book.availableCount : 1}"
                       required
                       min="0"
                       max="1000"
                       value="1">
                <div class="field-error" id="availableCountError">–î–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 0 –¥–æ 1000 –∏ –Ω–µ –±–æ–ª—å—à–µ –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞</div>
            </div>

            <button type="submit">üì• –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É</button>
        </form>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('addBookForm');
        const yearInput = document.getElementById('publicationYear');
        const isbnInput = document.getElementById('isbn');
        const totalCountInput = document.getElementById('totalCount');
        const availableCountInput = document.getElementById('availableCount');

        const currentYear = new Date().getFullYear();
        const maxYear = currentYear + 1;

        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≥–æ–¥
        yearInput.max = maxYear;
        yearInput.title = `–ì–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 1000 –¥–æ ${maxYear}`;

        // –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
        const validateField = (field) => {
            const errorElement = document.getElementById(field.id + 'Error');
            const value = field.value.trim();

            // –°–∫—Ä—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            if (errorElement) {
                errorElement.style.display = 'none';
                field.classList.remove('error-input');
            }

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
            if (field.hasAttribute('required') && value === '') {
                showError(field, '–≠—Ç–æ –ø–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è');
                return false;
            }

            // –î–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π –ø—Ä–æ–≤–µ—Ä—è–µ–º –¥–ª–∏–Ω—É
            if (field.type === 'text' && value !== '') {
                const minLength = field.getAttribute('minlength');
                const maxLength = field.getAttribute('maxlength');

                if (minLength && value.length < parseInt(minLength)) {
                    showError(field, `–ú–∏–Ω–∏–º—É–º ${minLength} —Å–∏–º–≤–æ–ª–æ–≤`);
                    return false;
                }

                if (maxLength && value.length > parseInt(maxLength)) {
                    showError(field, `–ú–∞–∫—Å–∏–º—É–º ${maxLength} —Å–∏–º–≤–æ–ª–æ–≤`);
                    return false;
                }

                // –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è ISBN
                if (field.id === 'isbn' && value !== '') {
                    if (!validateISBN(value)) {
                        showError(field, '–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç ISBN. –¢–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã –∏ –¥–µ—Ñ–∏—Å—ã, –º–∞–∫—Å–∏–º—É–º 20 —Å–∏–º–≤–æ–ª–æ–≤');
                        return false;
                    }
                }
            }

            // –î–ª—è —á–∏—Å–ª–æ–≤—ã—Ö –ø–æ–ª–µ–π
            if (field.type === 'number' && value !== '') {
                const numValue = parseInt(value);

                if (isNaN(numValue)) {
                    showError(field, '–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ');
                    return false;
                }

                const min = field.getAttribute('min');
                const max = field.getAttribute('max');

                if (min && numValue < parseInt(min)) {
                    showError(field, `–ú–∏–Ω–∏–º—É–º: ${min}`);
                    return false;
                }

                if (max && numValue > parseInt(max)) {
                    showError(field, `–ú–∞–∫—Å–∏–º—É–º: ${max}`);
                    return false;
                }

                // –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –≥–æ–¥–∞
                if (field.id === 'publicationYear') {
                    if (numValue < 1000 || numValue > maxYear) {
                        showError(field, `–ì–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 1000 –¥–æ ${maxYear}`);
                        return false;
                    }
                }

                // –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
                if (field.id === 'totalCount') {
                    if (numValue < 1) {
                        showError(field, '–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 1');
                        return false;
                    }
                }

                if (field.id === 'availableCount') {
                    if (numValue < 0) {
                        showError(field, '–î–æ—Å—Ç—É–ø–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º');
                        return false;
                    }
                }
            }

            return true;
        };

        // –í–∞–ª–∏–¥–∞—Ü–∏—è ISBN
        const validateISBN = (isbn) => {
            if (isbn.length > 20) return false;
            if (!/^[0-9\-]+$/.test(isbn)) return false;
            if (isbn.startsWith('-') || isbn.endsWith('-')) return false;
            if (isbn.includes('--')) return false;
            return true;
        };

        // –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É
        const showError = (field, message) => {
            const errorElement = document.getElementById(field.id + 'Error');
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.style.display = 'block';
                field.classList.add('error-input');
            }
        };

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
        const validateCounts = () => {
            const total = parseInt(totalCountInput.value) || 0;
            const available = parseInt(availableCountInput.value) || 0;
            const totalError = document.getElementById('totalCountError');
            const availableError = document.getElementById('availableCountError');

            // –°–∫—Ä—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏
            if (totalError) totalError.style.display = 'none';
            if (availableError) availableError.style.display = 'none';
            totalCountInput.classList.remove('error-input');
            availableCountInput.classList.remove('error-input');

            if (available > total) {
                availableCountInput.classList.add('error-input');
                if (availableError) {
                    availableError.textContent = '–î–æ—Å—Ç—É–ø–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ –æ–±—â–µ–≥–æ';
                    availableError.style.display = 'block';
                }
                return false;
            }

            return true;
        };

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ availableCount
        totalCountInput.addEventListener('change', function() {
            const total = parseInt(this.value) || 0;
            const available = parseInt(availableCountInput.value) || 0;

            if (available > total) {
                availableCountInput.value = total;
            }
            validateCounts();
        });

        availableCountInput.addEventListener('change', function() {
            validateCounts();
        });

        // –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –≤–≤–æ–¥–µ
        const allInputs = form.querySelectorAll('input');
        allInputs.forEach(input => {
            input.addEventListener('blur', function() {
                validateField(this);
                if (this.id === 'totalCount' || this.id === 'availableCount') {
                    validateCounts();
                }
            });

            input.addEventListener('input', function() {
                // –°–∫—Ä—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –≤–≤–æ–¥–∞
                const errorElement = document.getElementById(this.id + 'Error');
                if (errorElement) {
                    errorElement.style.display = 'none';
                    this.classList.remove('error-input');
                }
            });
        });

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ ISBN –ø—Ä–∏ –≤–≤–æ–¥–µ
        if (isbnInput) {
            isbnInput.addEventListener('blur', function() {
                if (this.value.trim() !== '') {
                    validateField(this);
                }
            });
        }

        // –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã
        form.addEventListener('submit', function(event) {
            console.log('–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º—ã –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π...');

            let isValid = true;
            const errorMessages = [];

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –ø–æ–ª—è
            allInputs.forEach(input => {
                if (!validateField(input)) {
                    isValid = false;
                }
            });

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
            if (!validateCounts()) {
                isValid = false;
            }

            // –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É
            if (!isValid) {
                event.preventDefault();
                console.log('–§–æ—Ä–º–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—à–∏–±–∫–∏, –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞');

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–±—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                const errorDiv = document.getElementById('errorMessage');
                if (errorDiv) {
                    errorDiv.textContent = '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏ –≤ —Ñ–æ—Ä–º–µ';
                    errorDiv.style.display = 'block';

                    // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
                    const firstError = form.querySelector('.error-input');
                    if (firstError) {
                        firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }

                return false;
            }

            console.log('–§–æ—Ä–º–∞ –≤–∞–ª–∏–¥–Ω–∞, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º...');
            return true;
        });

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —É—Å–ø–µ—à–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        if (window.location.search.includes('success')) {
            const successDiv = document.getElementById('successMessage');
            if (successDiv) {
                successDiv.style.display = 'block';
                setTimeout(() => {
                    successDiv.style.display = 'none';
                }, 5000);
            }
        }
    });
</script>
<div th:replace="fragments/footer :: footer"></div>
</body>
</html>